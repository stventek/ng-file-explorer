<div class="flex h-full overflow-hidden">
  <div
    class="flex gap-3 flex-wrap flex-1 items-start content-start overflow-y-auto p-3">
    <ng-container *ngFor="let node of currentContent.nodes">
      <div *ngIf="node.type === '__folder__'; else file">
        <app-folder
          (contextMenuAction)="handleContextMenuAction($event)"
          [node]="node"
          (focused)="setSeletedNode($event)"
          (focusout)="unSelectNode()"
          [nodeFocus]="nodeFocus && selectedNode === node" />
      </div>
      <ng-template #file>
        <div *ngIf="node.type === '__file__'">
          <app-file
            [node]="node"
            (contextMenuAction)="handleContextMenuAction($event)"
            (focused)="setSeletedNode($event)"
            (focusout)="unSelectNode()"
            [nodeFocus]="nodeFocus && selectedNode === node" />
        </div>
      </ng-template>
    </ng-container>
  </div>
  <div #properties tabindex="0" (focusout)="unSelectNode()">
    <app-folder-properties
      (showProperties)="handleShowProperties($event)"
      *ngIf="
        openProperties &&
        nodeFocus &&
        selectedNode &&
        selectedNode.type === '__folder__'
      "
      [folder]="selectedNode" />
    <app-file-properties
      (showProperties)="handleShowProperties($event)"
      *ngIf="
        openProperties &&
        nodeFocus &&
        selectedNode &&
        selectedNode.type === '__file__'
      "
      [file]="selectedNode" />
    <app-placeholder-properties
      (showProperties)="handleShowProperties($event)"
      *ngIf="!nodeFocus && openProperties" />
    <app-file-properties-modal
      *ngIf="nodeFocus && selectedNode && selectedNode.type === '__file__'"
      [file]="selectedNode"
      [openPropertiesModal]="openPropertiesModal" />
    <app-folder-properties-modal
      *ngIf="nodeFocus && selectedNode && selectedNode.type === '__folder__'"
      [folder]="selectedNode"
      [openPropertiesModal]="openPropertiesModal" />
  </div>
  <app-snackbar
    [type]="'alert-info'"
    [hideDuration]="6000"
    [open]="snackbarOpen"
    (afterClose)="snackbarClose()"
    [message]="'File deleted successfully'" />
</div>
